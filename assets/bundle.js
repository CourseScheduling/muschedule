function Model(){this._token="",this.getToken()}function listen(e){for(var r in e)this.addEventListener(r,e[r])}function sliderInit(){for(var e=document.getElementsByClassName("range__wrap"),r=e.length;r--;)listen.call(e[r],sliderEvents)}var Model=new Model,Controller=new Controller,Mu={Model:Model,Controller:Controller,View:View};Model.prototype.getToken=function(){var e=this;this._token=localStorage.TOKEN,this._token||e.AJAX({type:"GET",url:"/api/v1/token",params:{print:Mu.Controller.fingerPrint(),navId:Mu.Controller.grabNav()},done:function(r){e._token=r.token},error:function(){setTimeout(function(){e.getToken()},1e3)}})},Model.prototype.AJAX=function(e){var r=e.url;for(var o in e.params)r+=o+"="+encodeURI(e.params[o])+"&";var n="";if("POST"==e.type)for(var t in e.data)n+=t+"="+encodeURI(e.data[t])+"&";var i=new XMLHttpRequest;i.open(e.type,r,!0),i.onload=function(){if(i.status>=200&&i.status<400){if(e.notJSON)return void(e.done&&e.done(i.responseText));try{var r=JSON.parse(i.responseText)}catch(r){return void(e.error&&e.error({error:"BAD JSON"}))}if(r.error)return void(e.error&&e.error(r.error));e.done&&e.done(r)}else e.error&&e.error()},i.onerror=function(){e.error&&e.error()},i.send(n)},sliderEvents={mousedown:function(e){},mouseup:function(e){},mousemove:function(e){}},sliderInit();